
<!-- <div class="loading" *ngIf="isLoading">
    <div class="spinner"></div>
</div> -->
<div class="row m-0 mt-4">
    <div class="col-md-2">
        <h2 style="color: #4267b2;margin: 10px auto 10px 14px;font-weight: bold;"> Order</h2>
    </div>
    <div class="col-md-10">
        <pos-options 
            [selectedItem]="selectedItem" 
            [orders]="orders$" 
            (showTicketNote)="showTicketNote()"
            (createNewTicket)="createNewTicket()"
            (printBill)="printBill()" 
            (removeItem)="removeItem($event)" 
            (voidItem)="voidItem($event)"
            (incrementQty)="incrementQty($event)"
            (decrementQty)="decrementQty($event)"
            (toogleGiftItem)="toogleGiftItem($event)"
            (moveItems)="moveItems($event)">
        </pos-options>
    </div>
</div>
<div [formGroup]="postableForm" class="row m-0 mt-4">
    <div class="col-7 card" formArrayName="AccountTransactionValues">
        <div class="row m-0 mt-2" *ngFor="let AccountTransactionValue of AccountTransactionValues.controls; let i=index" [formGroupName]="i">
            <div class="col-sm-4">
                <label>Menu Items</label>
                <!-- <select class="form-control " formControlName="productId">
                    <option value="water"> water</option>
                    <option value="coke"> coke</option>
                    <option value="pizza"> pizza</option>
                    <option value="water"> water</option>
                    <!-- <option *ngFor="let accounts of account" [ngValue]="accounts.Id">{{accounts.Name}}</option> -->
                <!-- </select> --> 

                <ngx-select-dropdown 
                    (change)="selectionChanged($event,i)" 
                    [multiple]="false" 
                    [config]="config"
                    formControlName="productId"
                    [options]="productList">
                </ngx-select-dropdown>
                <!-- <small [hidden]="postableForm.controls.AccountTransactionValues.controls[i].controls.productId.valid" class="text-danger">
                    Particular Name is required
                </small> -->
            </div>
            <div class="col-sm-3">
                <label>Quantity</label>
                <input type="number" class="form-control" placeholder="quantity" formControlName="quantity">
                <!-- <small [hidden]="postableForm.controls.AccountTransactionValues.controls[i].controls.quantity.valid" class="text-danger">
                    quantity is required
                </small> -->
            </div>
            <div class="col-sm-4">
                <label>Description</label>
                <textarea name="description" class="form-control" formControlName="description" rows="1" cols="20"></textarea>
            </div>
            <div class="col-sm-1 mt-2" *ngIf="AccountTransactionValues.controls.length > 1">
                <button class="btn btn-danger" (click)="removeTrackerModel(i)">
                    <i class="fa fa-trash"></i>
                </button>
            </div>

            <div class="col-sm-12 mt-2 mb-2">
                <button
                class="btn btn-success" (click)="addCategory(i)" [disabled]="!AccountTransactionValues.valid">Add</button>
            </div>
        </div>
    </div>

    <div class="col-md-5">
        <pos-tickets [table]="table"
                     [toOpenTicketId]="toOpenTicketId"
                     *ngIf="checkTicket()">
        </pos-tickets>



        <pos-orders *ngIf="selectedTicket && tableNew && (ordersNew.length > 0) && (productList.length > 0)"
                    [table]="tableNew"
                    [ticket]="ticket$ | async"
                    [products]="productList"
                    [orders]="ordersNew"
                    [selectedTable]="selectedTable"
                    [selectedCustomerId]="selectedCustomerId"
                    (selectOrderItem)="selectOrderItem($event)"
                    (printBill)="printBill()">
        </pos-orders>
    </div>
</div>